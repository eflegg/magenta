"use strict";window.jQuery.each(Waypoint.adapters,(function(e,t){describe(t.name+" adapter: ",(function(){describe("Waypoint",(function(){var e,n,o,i,r,$=window.jQuery;function a(){e=!0}function l(){return e}beforeEach((function(){Waypoint.Adapter=t.Adapter,loadFixtures("standard.html"),n=$(window),e=!1,o=null})),afterEach((function(){Waypoint.destroyAll(),n.scrollTop(0).scrollLeft(0)})),describe("new Waypoint()",(function(){it("errors out",(function(){expect((function(){o=new Waypoint})).toThrow()}))})),describe("new Waypoint(options)",(function(){it("returns an instance of the Waypoint class",(function(){o=new Waypoint({element:document.getElementById("same1"),handler:function(){}}),expect(o instanceof Waypoint).toBeTruthy()})),it("requires the element option",(function(){expect((function(){o=new Waypoint({handler:function(){}})})).toThrow()})),it("requires the handler option",(function(){expect((function(){o=new Waypoint({element:document.getElementById("same1")})})).toThrow()})),it("triggers down on new already-reached waypoints",(function(){runs((function(){i=$("#same2"),n.scrollTop(i.offset().top+1),o=new Waypoint({element:i[0],handler:function(t){e="down"===t}})})),waitsFor(l,"callback to trigger")}))})),describe("handler option",(function(){var e;beforeEach((function(){i=$("#same1"),e=null,o=new Waypoint({element:i[0],handler:function(t){e=t}})})),it("triggers with direction parameter",(function(){runs((function(){n.scrollTop(i.offset().top)})),waitsFor((function(){return"down"===e}),"down to trigger"),runs((function(){n.scrollTop(i.offset().top-1)})),waitsFor((function(){return"up"===e}),"up to trigger")}))})),describe("offset option",(function(){beforeEach((function(){i=$("#same1")})),it("takes a px offset",(function(){runs((function(){o=new Waypoint({element:i[0],handler:a,offset:50}),n.scrollTop(i.offset().top-51),expect(e).toBeFalsy(),n.scrollTop(i.offset().top-50)})),waitsFor(l,"callback to trigger")})),it("takes a % offset",(function(){var t=i.offset().top-.37*Waypoint.viewportHeight();runs((function(){o=new Waypoint({element:i[0],handler:a,offset:"37%"}),n.scrollTop(t-1),expect(e).toBeFalsy(),n.scrollTop(t)})),waitsFor(l,"callback to trigger")})),it("takes a function offset",(function(){runs((function(){o=new Waypoint({element:i[0],handler:a,offset:function(){return-$(this.element).height()}}),n.scrollTop(i.offset().top+i.height()-1),expect(e).toBeFalsy(),n.scrollTop(i.offset().top+i.height())})),waitsFor(l,"callback to trigger")})),it("takes a bottom-in-view function alias",(function(){var t=i.offset().top+i.outerHeight()-Waypoint.viewportHeight();runs((function(){o=new Waypoint({element:i[0],handler:a,offset:"bottom-in-view"}),n.scrollTop(t-1),expect(e).toBeFalsy(),n.scrollTop(t)})),waitsFor(l,"callback to trigger")}))})),describe("context option",(function(){beforeEach((function(){n=$("#bottom"),i=$("#inner3")})),it("works with px offset",(function(){o=new Waypoint({element:i[0],handler:a,context:n[0],offset:10}),runs((function(){n.scrollTop(189),expect(e).toBeFalsy(),n.scrollTop(190)})),waitsFor(l,"callback to trigger")})),it("works with % offset",(function(){o=new Waypoint({element:i[0],handler:a,context:n[0],offset:"100%"}),runs((function(){n.scrollTop(149),expect(e).toBeFalsy(),n.scrollTop(150)})),waitsFor(l,"callback to trigger")})),it("works with function offset",(function(){o=new Waypoint({element:i[0],handler:a,context:n[0],offset:function(){return $(this.element).height()/2}}),runs((function(){n.scrollTop(149),expect(e).toBeFalsy(),n.scrollTop(150)})),waitsFor(l,"callback to trigger")})),it("works with bottom-in-view offset alias",(function(){o=new Waypoint({element:i[0],handler:a,context:n[0],offset:"bottom-in-view"}),runs((function(){n.scrollTop(249),expect(e).toBeFalsy(),n.scrollTop(250)})),waitsFor(l,"callback to trigger")}))})),describe("horizontal option",(function(){var e;beforeEach((function(){e=null,i=$("#same1"),o=new Waypoint({element:i[0],horizontal:!0,handler:function(t){e=t}})})),it("triggers right/left directions",(function(){runs((function(){n.scrollLeft(i.offset().left)})),waitsFor((function(){return"right"===e}),"right direction to trigger"),runs((function(){n.scrollLeft(i.offset().left-1)})),waitsFor((function(){return"left"===e}))}))})),describe("continuous option",(function(){var e,t,r,a;function l(){r+=1,a=this}beforeEach((function(){i=$("#same1"),e=$("#near1"),r=0,o=new Waypoint({element:i[0],continuous:!1,handler:l}),t=new Waypoint({element:e[0],continuous:!1,handler:l})})),it("does not trigger the earlier waypoint",(function(){runs((function(){n.scrollTop(e.offset().top)})),waitsFor((function(){return r}),"later callback to trigger"),runs((function(){expect(r).toEqual(1),expect(a).toEqual(t)}))})),it("prevents earlier trigger on refresh",(function(){runs((function(){i.css("top","-1px"),e.css("top","-2px"),Waypoint.refreshAll()})),waitsFor((function(){return r}),"later callback to trigger"),runs((function(){expect(r).toEqual(1),expect(a).toEqual(o)}))}))})),describe("with window as the waypoint element",(function(){beforeEach((function(){i=$(window),o=new Waypoint({element:i[0],offset:-i.height(),handler:a})})),it("triggers waypoint",(function(){runs((function(){i.scrollTop(i.height()+1)})),waitsFor(l,"callback to trigger")}))})),describe("#disable()",(function(){beforeEach((function(){i=$("#same1"),o=new Waypoint({element:i[0],handler:a}),r=o.disable()})),it("returns the same waypoint object for chaining",(function(){expect(r).toEqual(o)})),it("disables callback triggers",(function(){runs((function(){n.scrollTop(i.offset().top)})),waits(50),runs((function(){expect(e).toBeFalsy()}))}))})),describe("#enable()",(function(){beforeEach((function(){i=$("#same1"),(o=new Waypoint({element:i[0],handler:a})).disable(),r=o.enable()})),it("returns the same waypoint instance for chaining",(function(){expect(r).toEqual(o)})),it("enables callback triggers",(function(){runs((function(){n.scrollTop(i.offset().top)})),waitsFor(l,"callback to trigger")}))})),describe("#destroy()",(function(){beforeEach((function(){i=$("#same1"),o=new Waypoint({element:i[0],handler:a}),r=o.destroy()})),it("returns undefined",(function(){expect(r).toBeUndefined()})),it("no longer triggers callbacks",(function(){runs((function(){n.scrollTop(i.offset().top)})),waits(50),runs((function(){expect(e).toBeFalsy()}))}))})),describe("#previous",(function(){beforeEach((function(){i=$("#same1"),o=new Waypoint({element:i[0],handler:a})})),it("calls previous on the waypoint group",(function(){spyOn(o.group,"previous"),o.previous(),expect(o.group.previous).toHaveBeenCalledWith(o)})),it("returns the group call results",(function(){expect(o.previous()).toBeNull()}))})),describe("#next",(function(){beforeEach((function(){i=$("#same1"),o=new Waypoint({element:i[0],handler:a})})),it("calls next on the waypoint group",(function(){spyOn(o.group,"next"),o.next(),expect(o.group.next).toHaveBeenCalledWith(o)})),it("returns the group call results",(function(){expect(o.next()).toBeNull()}))})),describe("Waypoint.viewportHeight()",(function(){it("returns window innerHeight if it exists",(function(){var e=Waypoint.viewportHeight();window.innerHeight?expect(e).toEqual(window.innerHeight):expect(e).toEqual(document.documentElement.clientHeight)}))})),describe("Waypoint.viewportWidth()",(function(){it("returns client width",(function(){var e=document.documentElement.clientWidth;expect(Waypoint.viewportWidth()).toEqual(e)}))})),describe("Waypoint.refreshAll()",(function(){it("is an alias for Waypoint.Context.refreshAll",(function(){spyOn(Waypoint.Context,"refreshAll"),Waypoint.refreshAll(),expect(Waypoint.Context.refreshAll).toHaveBeenCalled()}))})),describe("Waypoint.destroyAll()",(function(){it("calls destroy on all waypoints",(function(){var e=new Waypoint({element:$("#same1")[0],handler:function(){}});o=new Waypoint({element:$("#same1")[0],handler:function(){}}),spyOn(e,"destroy").andCallThrough(),spyOn(o,"destroy").andCallThrough(),Waypoint.destroyAll(),expect(e.destroy).toHaveBeenCalled(),expect(o.destroy).toHaveBeenCalled()}))})),describe("Waypoint.disableAll()",(function(){it("calls disable on all waypoints",(function(){var e=new Waypoint({element:$("#same1")[0],handler:function(){}});o=new Waypoint({element:$("#same1")[0],handler:function(){}}),spyOn(e,"disable").andCallThrough(),spyOn(o,"disable").andCallThrough(),Waypoint.disableAll(),expect(e.disable).toHaveBeenCalled(),expect(o.disable).toHaveBeenCalled()}))})),describe("Waypoint.enableAll()",(function(){var e;beforeEach((function(){e=new Waypoint({element:$("#same1")[0],handler:function(){}}),o=new Waypoint({element:$("#same1")[0],handler:function(){}}),Waypoint.disableAll(),spyOn(Waypoint.Context,"refreshAll").andCallThrough(),Waypoint.enableAll()})),it("sets enabled on all waypoints",(function(){expect(e.enabled).toBeTruthy(),expect(o.enabled).toBeTruthy()})),it("refreshes all contexts",(function(){expect(Waypoint.Context.refreshAll).toHaveBeenCalled()}))}))}))}))}));