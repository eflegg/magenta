"use strict";describe("Waypoint Sticky Shortcut",(function(){var e,n,t,i,o,a,$=window.jQuery,c=$(window);beforeEach((function(){loadFixtures("infinite.html"),n=$(".infinite-item"),e=$(".infinite-container"),t=$(".infinite-more-link"),o=jasmine.createSpy("on before callback"),a=jasmine.createSpy("on after callback")})),afterEach((function(){i.destroy(),c.scrollTop(0)})),it("returns an instance of the Waypoint.Infinite class",(function(){i=new Waypoint.Infinite({element:e[0]}),expect(i instanceof Waypoint.Infinite).toBeTruthy()})),describe("loading new pages",(function(){beforeEach((function(){runs((function(){i=new Waypoint.Infinite({element:e[0],onBeforePageLoad:o,onAfterPageLoad:a}),c.scrollTop(Waypoint.viewportHeight()-e.height())})),waitsFor((function(){return $(".infinite-container > .infinite-item").length>n.length}),"new items to load")})),it("replaces the more link with the new more link",(function(){expect(t[0]).not.toEqual($(".infinite-more-link")[0])})),it("fires the before callback",(function(){expect(o.callCount).toBeTruthy()})),it("fires the after callback",(function(){expect(a.callCount).toBeTruthy(),expect(a).toHaveBeenCalledWith(jasmine.any(Object))}))})),describe("when there is no more link on initialization",(function(){beforeEach((function(){t.remove(),i=new Waypoint.Infinite({element:e[0]})})),it("does not create the waypoint",(function(){expect(i.waypoint).toBeFalsy()}))}))}));