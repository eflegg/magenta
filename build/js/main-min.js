document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".accordion-item"),t=()=>{e.forEach((e=>{e.setAttribute("aria-expanded","false"),console.log("remove fired")}))};function n(){"false"===this.ariaExpanded?(t(),this.setAttribute("aria-expanded","true")):(t(),this.setAttribute("aria-expanded","false"))}e.forEach((e=>e.addEventListener("click",n)));document.querySelectorAll("#menu-main-menu > .menu-item-has-children>.sub-menu").forEach((e=>{e.classList.add("top-level-subnav");const t=document.createElement("button");t.classList.add("sub-nav-toggle"),e.parentNode.insertBefore(t,e)}));document.querySelectorAll(".top-level-subnav>.menu-item-has-children>.sub-menu").forEach((e=>{e.classList.add("second-level-subnav")}));const a=document.querySelectorAll(".main>.menu-item-has-children");let o=null;const r=e=>{const t=e.querySelector("ul"),n=e.querySelector("button");o=e,t.setAttribute("aria-hidden","false"),n.setAttribute("aria-expanded","true"),e.dataset.expanded="true"},i=e=>{const t=e.querySelector("ul"),n=e.querySelector("button");o=null,t.setAttribute("aria-hidden","true"),n.setAttribute("aria-expanded","false"),e.dataset.expanded="false"};a.forEach((e=>{const t=e.querySelector("button");t.addEventListener("click",(()=>{"false"===t.ariaExpanded?r(e):i(e)})),e.addEventListener("mouseenter",(()=>{r(e)})),e.addEventListener("mouseleave",(()=>{i(e)}))})),document.addEventListener("keydown",(e=>{if("Tab"===e.key){if(!o)return;const t=o.querySelector(".second-level-subnav"),n=o.querySelector(":focus"),a=o.querySelector("a"),r=t.lastElementChild.querySelector("a");if(!e.shiftKey&&n===r)return void i(o);if(e.shiftKey&&n===a)return void i(o)}"Escape"==e.key&&i(o)}));let s=window.innerWidth;window.addEventListener("resize",(function(){s<1e3?(u.classList.add("mobile-nav"),u.classList.remove("desktop-nav")):s>=1e3&&(u.classList.add("desktop-nav"),u.classList.remove("mobile-nav"))}));const d=document.querySelector(".mobile-nav"),l=document.querySelector(".js-menu-button"),u=document.querySelector(".js-navigation"),c=document.querySelector("header"),m=()=>{u.setAttribute("aria-hidden",!0),l.setAttribute("aria-expanded",!1),l.setAttribute("aria-label","Menu"),d?d.style.overflowY="scroll":document.body.style.overflowY="initial"};const v=document.querySelector("header");l.addEventListener("click",(()=>{"false"===l.getAttribute("aria-expanded")?(u.setAttribute("aria-hidden",!1),l.setAttribute("aria-expanded",!0),l.setAttribute("aria-label","Close menu"),document.body.style.overflow="hidden",v.style.position="relative",function(e,t,n){const a=e.querySelectorAll("button:not(#header-search, #searchsubmit2),  a:not(.skiplink, .btn--fat, .home-logo)"),o=a[0],r=a[a.length-1];o.focus();const i=()=>{n(),e.removeEventListener("keydown",s),t.removeEventListener("click",i),t.focus()};t.addEventListener("click",i);const s=e=>{const t="Escape"===e.key,n="Tab"===e.key||9===e.keyCode;t&&i(),n&&(e.shiftKey?document.activeElement===o&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),o.focus()))};e.addEventListener("keydown",s)}(c,l,m),d?d.style.overflow="hidden":(document.body.style.overflow="hidden",document.body.style.height="100vh")):(u.setAttribute("aria-hidden",!0),l.setAttribute("aria-expanded",!1),l.setAttribute("aria-label","Open menu"),document.body.style.overflowY="initial",document.body.style.height="100%",v.style.position="relative")}))}));