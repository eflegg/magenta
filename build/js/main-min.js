var colour="random",sparkles=50,x=ox=400,y=oy=300,swide=800,shigh=600,sleft=sdown=0,tiny=new Array,star=new Array,starv=new Array,starx=new Array,stary=new Array,tinyx=new Array,tinyy=new Array,tinyv=new Array;function sparkle(){var e;if(x!=ox||y!=oy)for(ox=x,oy=y,e=0;e<sparkles;e++)if(!starv[e]){star[e].style.left=(starx[e]=x)+"px",star[e].style.top=(stary[e]=y)+"px",star[e].style.clip="rect(0px, 5px, 5px, 0px)",star[e].childNodes[0].style.backgroundColor=star[e].childNodes[1].style.backgroundColor="random"==colour?newColour():colour,star[e].style.visibility="visible",starv[e]=50;break}for(e=0;e<sparkles;e++)starv[e]&&update_star(e),tinyv[e]&&update_tiny(e);setTimeout("sparkle()",40)}function update_star(e){if(25==--starv[e]&&(star[e].style.clip="rect(1px, 4px, 4px, 1px)"),starv[e]){if(stary[e]+=1+3*Math.random(),!(stary[e]<shigh+sdown&&starx[e]>0))return star[e].style.visibility="hidden",void(starv[e]=0);star[e].style.top=stary[e]+"px",starx[e]+=(e%5-2)/5,star[e].style.left=starx[e]+"px"}else tinyv[e]=50,tiny[e].style.top=(tinyy[e]=stary[e])+"px",tiny[e].style.left=(tinyx[e]=starx[e])+"px",tiny[e].style.width="2px",tiny[e].style.height="2px",tiny[e].style.backgroundColor=star[e].childNodes[0].style.backgroundColor,star[e].style.visibility="hidden",tiny[e].style.visibility="visible"}function update_tiny(e){if(25==--tinyv[e]&&(tiny[e].style.width="1px",tiny[e].style.height="1px"),tinyv[e]){if(tinyy[e]+=1+3*Math.random(),!(tinyy[e]<shigh+sdown&&tinyx[e]>0))return tiny[e].style.visibility="hidden",void(tinyv[e]=0);tiny[e].style.top=tinyy[e]+"px",tinyx[e]+=(e%5-2)/5,tiny[e].style.left=tinyx[e]+"px"}else tiny[e].style.visibility="hidden"}function mouse(e){set_scroll(),y=e?e.pageY:event.y+sdown,x=e?e.pageX:event.x+sleft}function set_scroll(){"number"==typeof self.pageYOffset?(sdown=self.pageYOffset,sleft=self.pageXOffset):document.body.scrollTop||document.body.scrollLeft?(sdown=document.body.scrollTop,sleft=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)?(sleft=document.documentElement.scrollLeft,sdown=document.documentElement.scrollTop):(sdown=0,sleft=0)}function set_width(){"number"==typeof self.innerWidth?(swide=self.innerWidth,shigh=self.innerHeight):document.documentElement&&document.documentElement.clientWidth?(swide=document.documentElement.clientWidth,shigh=document.documentElement.clientHeight):document.body.clientWidth&&(swide=document.body.clientWidth,shigh=document.body.clientHeight)}function createDiv(e,t){var n=document.createElement("div");return n.style.position="absolute",n.style.height=e+"px",n.style.width=t+"px",n.style.overflow="hidden",n}function newColour(){var e=new Array;return e[0]=255,e[1]=Math.floor(256*Math.random()),e[2]=Math.floor(Math.random()*(256-e[1]/2)),e.sort((function(){return.5-Math.random()})),"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}window.onload=function(){if(document.getElementById){for(var e=0;e<sparkles;e++){var t;(t=createDiv(3,3)).style.visibility="hidden",document.body.appendChild(tiny[e]=t),starv[e]=0,tinyv[e]=0,(t=createDiv(5,5)).style.backgroundColor="transparent",t.style.visibility="hidden";var n=createDiv(1,5),o=createDiv(5,1);t.appendChild(n),t.appendChild(o),n.style.top="2px",n.style.left="0px",o.style.top="0px",o.style.left="2px",document.body.appendChild(star[e]=t)}set_width(),sparkle()}},document.onmousemove=mouse,window.onresize=set_width,document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("a").forEach((e=>{e.classList.add("fade")}));let e=document.querySelector(".main-header"),t=0;const n=_.throttle((()=>{if((()=>{let e=!1,n=window.scrollY;return n>t&&(e=!0),t=n,e})()){const t=e.offsetHeight;console.log(t),e.classList.add("scroll-down"),e.style.top="-111px",e.classList.remove("scroll-up")}else e.classList.add("scroll-up"),e.classList.remove("scroll-down"),e.style.top="0"}),100);window.addEventListener("scroll",n);const o=document.querySelectorAll(".fade-me");window.addEventListener("scroll",(function(){o.forEach((e=>{((e,t=!1)=>{const{top:n,left:o,bottom:s,right:i}=e.getBoundingClientRect(),{innerHeight:r,innerWidth:l}=window;return t?(n>0&&n<r||s>0&&s<r)&&(o>0&&o<l||i>0&&i<l):n>=0&&o>=0&&s<=r&&i<=l})(e)&&e.classList.add("faded-in")}))}));const s=document.querySelectorAll(".accordion-item"),i=()=>{s.forEach((e=>{e.setAttribute("aria-expanded","false"),console.log("remove fired")}))};function r(){"false"===this.ariaExpanded?(i(),this.setAttribute("aria-expanded","true")):(i(),this.setAttribute("aria-expanded","false"))}s.forEach((e=>e.addEventListener("click",r)));const l=document.querySelectorAll("a.fade"),d=document.querySelector(".main-content");for(let e=0;e<l.length;e++)l[e].addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");d.classList.add("fade-out"),console.log("added fade-out"),setTimeout((()=>{window.location.href=t,console.log("changes pages")}),1e3)}));document.querySelectorAll("#menu-main-menu > .menu-item-has-children>.sub-menu").forEach((e=>{e.classList.add("top-level-subnav");const t=document.createElement("button");t.classList.add("sub-nav-toggle"),e.parentNode.insertBefore(t,e)}));document.querySelectorAll(".top-level-subnav>.menu-item-has-children>.sub-menu").forEach((e=>{e.classList.add("second-level-subnav")}));const a=document.querySelectorAll(".main>.menu-item-has-children");let c=null;const u=e=>{const t=e.querySelector("ul"),n=e.querySelector("button");c=e,t.setAttribute("aria-hidden","false"),n.setAttribute("aria-expanded","true"),e.dataset.expanded="true"},y=e=>{const t=e.querySelector("ul"),n=e.querySelector("button");c=null,t.setAttribute("aria-hidden","true"),n.setAttribute("aria-expanded","false"),e.dataset.expanded="false"};a.forEach((e=>{const t=e.querySelector("button");t.addEventListener("click",(()=>{"false"===t.ariaExpanded?u(e):y(e)})),e.addEventListener("mouseenter",(()=>{u(e)})),e.addEventListener("mouseleave",(()=>{y(e)}))})),document.addEventListener("keydown",(e=>{if("Tab"===e.key){if(!c)return;const t=c.querySelector(".second-level-subnav"),n=c.querySelector(":focus"),o=c.querySelector("a"),s=t.lastElementChild.querySelector("a");if(!e.shiftKey&&n===s)return void y(c);if(e.shiftKey&&n===o)return void y(c)}"Escape"==e.key&&y(c)}));let m=window.innerWidth;window.addEventListener("resize",(function(){m<1e3?(p.classList.add("mobile-nav"),p.classList.remove("desktop-nav")):m>=1e3&&(p.classList.add("desktop-nav"),p.classList.remove("mobile-nav"))}));const f=document.querySelector(".mobile-nav"),h=document.querySelector(".js-menu-button"),p=document.querySelector(".js-navigation"),v=document.querySelector("header"),b=()=>{p.setAttribute("aria-hidden",!0),h.setAttribute("aria-expanded",!1),h.setAttribute("aria-label","Menu"),f?f.style.overflowY="scroll":document.body.style.overflowY="initial"};const x=document.querySelector("header");h.addEventListener("click",(()=>{"false"===h.getAttribute("aria-expanded")?(p.setAttribute("aria-hidden",!1),h.setAttribute("aria-expanded",!0),h.setAttribute("aria-label","Close menu"),document.body.style.overflow="hidden",x.style.position="relative",function(e,t,n){const o=e.querySelectorAll("button:not(#header-search, #searchsubmit2),  a:not(.skiplink, .btn--fat, .home-logo)"),s=o[0],i=o[o.length-1];s.focus();const r=()=>{n(),e.removeEventListener("keydown",l),t.removeEventListener("click",r),t.focus()};t.addEventListener("click",r);const l=e=>{const t="Escape"===e.key,n="Tab"===e.key||9===e.keyCode;t&&r(),n&&(e.shiftKey?document.activeElement===s&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),s.focus()))};e.addEventListener("keydown",l)}(v,h,b),f?f.style.overflow="hidden":(document.body.style.overflow="hidden",document.body.style.height="100vh")):(p.setAttribute("aria-hidden",!0),h.setAttribute("aria-expanded",!1),h.setAttribute("aria-label","Open menu"),document.body.style.overflowY="initial",document.body.style.height="100%",x.style.position="relative")}))}));