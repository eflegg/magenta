var colour="random",sparkles=50,x=ox=400,y=oy=300,swide=800,shigh=600,sleft=sdown=0,tiny=new Array,star=new Array,starv=new Array,starx=new Array,stary=new Array,tinyx=new Array,tinyy=new Array,tinyv=new Array;function sparkle(){var e;if(x!=ox||y!=oy)for(ox=x,oy=y,e=0;e<sparkles;e++)if(!starv[e]){star[e].style.left=(starx[e]=x)+"px",star[e].style.top=(stary[e]=y)+"px",star[e].style.clip="rect(0px, 5px, 5px, 0px)",star[e].childNodes[0].style.backgroundColor=star[e].childNodes[1].style.backgroundColor="random"==colour?newMagentaColour():colour,star[e].style.visibility="visible",starv[e]=50;break}for(e=0;e<sparkles;e++)starv[e]&&update_star(e),tinyv[e]&&update_tiny(e);setTimeout("sparkle()",40)}function update_star(e){if(25==--starv[e]&&(star[e].style.clip="rect(1px, 4px, 4px, 1px)"),starv[e]){if(stary[e]+=1+3*Math.random(),!(stary[e]<shigh+sdown&&starx[e]>0))return star[e].style.visibility="hidden",void(starv[e]=0);star[e].style.top=stary[e]+"px",starx[e]+=(e%5-2)/5,star[e].style.left=starx[e]+"px"}else tinyv[e]=50,tiny[e].style.top=(tinyy[e]=stary[e])+"px",tiny[e].style.left=(tinyx[e]=starx[e])+"px",tiny[e].style.width="2px",tiny[e].style.height="2px",tiny[e].style.backgroundColor=star[e].childNodes[0].style.backgroundColor,star[e].style.visibility="hidden",tiny[e].style.visibility="visible"}function update_tiny(e){if(25==--tinyv[e]&&(tiny[e].style.width="1px",tiny[e].style.height="1px"),tinyv[e]){if(tinyy[e]+=1+3*Math.random(),!(tinyy[e]<shigh+sdown&&tinyx[e]>0))return tiny[e].style.visibility="hidden",void(tinyv[e]=0);tiny[e].style.top=tinyy[e]+"px",tinyx[e]+=(e%5-2)/5,tiny[e].style.left=tinyx[e]+"px"}else tiny[e].style.visibility="hidden"}function mouse(e){set_scroll(),y=e?e.pageY:event.y+sdown,x=e?e.pageX:event.x+sleft}function set_scroll(){"number"==typeof self.scrollY?(sdown=self.scrollY,sleft=self.scrollY):document.body.scrollTop||document.body.scrollLeft?(sdown=document.body.scrollTop,sleft=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)?(sleft=document.documentElement.scrollLeft,sdown=document.documentElement.scrollTop):(sdown=0,sleft=0)}function set_width(){"number"==typeof self.innerWidth?(swide=self.innerWidth,shigh=self.innerHeight):document.documentElement&&document.documentElement.clientWidth?(swide=document.documentElement.clientWidth,shigh=document.documentElement.clientHeight):document.body.clientWidth&&(swide=document.body.clientWidth,shigh=document.body.clientHeight)}function createDiv(e,t){var n=document.createElement("div");return n.style.position="absolute",n.style.height=e+"px",n.style.width=t+"px",n.style.overflow="hidden",n}function newMagentaColour(){const e=["#D97803","#F6E3DC","#BBCDCF","#963E67",,"#BF5083","#8C4D8D"];return e[Math.floor(Math.random()*e.length)]}window.onload=function(){if(document.getElementById){for(var e=0;e<sparkles;e++){var t;(t=createDiv(3,3)).style.visibility="hidden",document.body.appendChild(tiny[e]=t),starv[e]=0,tinyv[e]=0,(t=createDiv(5,5)).style.backgroundColor="transparent",t.style.visibility="hidden";var n=createDiv(1,5),o=createDiv(5,1);t.appendChild(n),t.appendChild(o),n.style.top="2px",n.style.left="0px",o.style.top="0px",o.style.left="2px",document.body.appendChild(star[e]=t)}set_width(),sparkle()}},document.onmousemove=mouse,window.onresize=set_width,document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll("a"),t=Array.prototype.slice.call(e);console.log("updated ",t);t.shift();console.log("final tags ",t),t.forEach((e=>{e.classList.add("fade")}));let n=document.querySelector(".main-header"),o=0;const s=_.throttle((()=>{if((()=>{let e=!1,t=window.scrollY;return t>o&&(e=!0),o=t,e})()){const e=n.offsetHeight;console.log(e),n.classList.add("scroll-down"),n.style.top="-111px",n.classList.remove("scroll-up")}else n.classList.add("scroll-up"),n.classList.remove("scroll-down"),n.style.top="0"}),100);window.addEventListener("scroll",s);const i=document.querySelectorAll(".fade-me");window.addEventListener("scroll",(function(){i.forEach((e=>{((e,t=!1)=>{const{top:n,left:o,bottom:s,right:i}=e.getBoundingClientRect(),{innerHeight:l,innerWidth:r}=window;return t?(n>0&&n<l||s>0&&s<l)&&(o>0&&o<r||i>0&&i<r):n>=0&&o>=0&&s<=l&&i<=r})(e)&&e.classList.add("faded-in")}))}));const l=document.querySelectorAll(".accordion-item"),r=()=>{l.forEach((e=>{e.setAttribute("aria-expanded","false"),console.log("remove fired")}))};function d(){"false"===this.ariaExpanded?(r(),this.setAttribute("aria-expanded","true")):(r(),this.setAttribute("aria-expanded","false"))}l.forEach((e=>e.addEventListener("click",d)));const a=document.querySelectorAll("a.fade"),c=document.querySelector(".main-content");for(let e=0;e<a.length;e++)a[e].addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");c.classList.add("fade-out"),console.log("added fade-out"),setTimeout((()=>{window.location.href=t,console.log("changes pages")}),1e3)}));document.querySelectorAll("#menu-main-menu > .menu-item-has-children>.sub-menu").forEach((e=>{e.classList.add("top-level-subnav");const t=document.createElement("button");t.classList.add("sub-nav-toggle"),e.parentNode.insertBefore(t,e)}));document.querySelectorAll(".top-level-subnav>.menu-item-has-children>.sub-menu").forEach((e=>{e.classList.add("second-level-subnav")}));const u=document.querySelectorAll(".main>.menu-item-has-children");let y=null;const m=e=>{const t=e.querySelector("ul"),n=e.querySelector("button");y=e,t.setAttribute("aria-hidden","false"),n.setAttribute("aria-expanded","true"),e.dataset.expanded="true"},f=e=>{const t=e.querySelector("ul"),n=e.querySelector("button");y=null,t.setAttribute("aria-hidden","true"),n.setAttribute("aria-expanded","false"),e.dataset.expanded="false"};u.forEach((e=>{const t=e.querySelector("button");t.addEventListener("click",(()=>{"false"===t.ariaExpanded?m(e):f(e)})),e.addEventListener("mouseenter",(()=>{m(e)})),e.addEventListener("mouseleave",(()=>{f(e)}))})),document.addEventListener("keydown",(e=>{if("Tab"===e.key){if(!y)return;const t=y.querySelector(".second-level-subnav"),n=y.querySelector(":focus"),o=y.querySelector("a"),s=t.lastElementChild.querySelector("a");if(!e.shiftKey&&n===s)return void f(y);if(e.shiftKey&&n===o)return void f(y)}"Escape"==e.key&&f(y)}));let h=window.innerWidth;window.addEventListener("resize",(function(){h<1e3?(b.classList.add("mobile-nav"),b.classList.remove("desktop-nav")):h>=1e3&&(b.classList.add("desktop-nav"),b.classList.remove("mobile-nav"))}));const p=document.querySelector(".mobile-nav"),v=document.querySelector(".js-menu-button"),b=document.querySelector(".js-navigation"),x=document.querySelector("header"),w=()=>{b.setAttribute("aria-hidden",!0),v.setAttribute("aria-expanded",!1),v.setAttribute("aria-label","Menu"),p?p.style.overflowY="scroll":document.body.style.overflowY="initial"};const g=document.querySelector("header");v.addEventListener("click",(()=>{"false"===v.getAttribute("aria-expanded")?(b.setAttribute("aria-hidden",!1),v.setAttribute("aria-expanded",!0),v.setAttribute("aria-label","Close menu"),document.body.style.overflow="hidden",g.style.position="relative",function(e,t,n){const o=e.querySelectorAll("button:not(#header-search, #searchsubmit2),  a:not(.skiplink, .btn--fat, .home-logo)"),s=o[0],i=o[o.length-1];s.focus();const l=()=>{n(),e.removeEventListener("keydown",r),t.removeEventListener("click",l),t.focus()};t.addEventListener("click",l);const r=e=>{const t="Escape"===e.key,n="Tab"===e.key||9===e.keyCode;t&&l(),n&&(e.shiftKey?document.activeElement===s&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),s.focus()))};e.addEventListener("keydown",r)}(x,v,w),p?p.style.overflow="hidden":(document.body.style.overflow="hidden",document.body.style.height="100vh")):(b.setAttribute("aria-hidden",!0),v.setAttribute("aria-expanded",!1),v.setAttribute("aria-label","Open menu"),document.body.style.overflowY="initial",document.body.style.height="100%",g.style.position="relative")}))}));